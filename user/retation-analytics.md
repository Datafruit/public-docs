# 留存分析

## 留存分析的意义
&emsp;&emsp;留存用户和留存率均体现应用的质量和保留用户的能力。如果一款产品不仅能够满足用户的核心需求，而且可以方便地满足客户的核心需求，那么这块产品的用户留存率基本不会太差。那么留存分析就是一种用来分析用户参与情况/活跃程度的分析模型，考察进行初始行为的用户中，有多少人会进行留存行为。

&emsp;&emsp;这是用来衡量产品对用户价值高低的重要方法，宏观上把握用户生命周期长度以及定位产品可改善至之处。通过留存分析，可以查看新功能上线之后，对不同群体的留存是否带来不同效果？是否提高了用户留存率？ 可以判断某个活动是否真正为产品做到了用户拉新？

&emsp;&emsp;通过留存数据结合版本更新、市场推广等诸多因素，砍掉使用频率低的功能，实现快速迭代验证，制定相应的策略。

## 留存分析的功能介绍  
  * 「选择用户群」：圈定一群用户去分析他们留存的情况。
  * 「设定分析条件」：提供整体留存、功能留存、自定义留存三种留存分析。
      * 整体留存：分析用户回访产品应用的留存情况
      * 功能留存：分析用户对不同产品功能的使用粘性与活跃度
      * 自定义留存：以起始行为锁定分析的用户，以回访行为观察其留存的情况
  * 「分析结果」：查询的结果反映用户对产品，对功能的黏性以及生命周期的长度情况
  * 「对比分析」：比较不同属性的用户群体黏性情况，从差异角度窥视优化思路。通过观察不同属性的用户群体（如新注册用户与老客户、不同渠道来源的客户）的生命周期长度，从而对产品或功能的优化方向进行调整。除了用户群之间的比较外，还能针对不同维度进行对比。
  * 「保存常用」：将经常会用到的留存条件保存起来，以便用于日后进行数据分析。

## 留存分析的操作介绍  

 1. 选择用户群

    a)	下拉选择您要分析的用户群，用户群的目的是为了更精细地分析目标用户

    b)	当然，您也可以进入用户分群的界面创建一个用户群进行分析

    ![](/assets/user/re-1.png)

2.	设定分析条件

    a)	整体留存：用于分析用户对产品应用的留存情况。

    b)	功能留存：用于分析用户回访产品应用或重复进行某些关键行为的情况。

        产品功能留存一般我们不仅需要关注整个产品应用的留存，还需要关注核心行为的留存率，比如重复购买的情况。还可以对产品的新功能进行留存分析：对产品进行小幅迭代时，通过留存表观测随着时间变化产品功能的留存率有没有整体提升。  

    c)	自定义留存：以起始行为锁定分析的用户，以回访行为观察其留存的情况

        i.起始行为：起始行为规定了你想筛选什么样的用户进行留存分析。在默认条件下，起始行为被设置为“任意行为”，即筛选为一定时间内的访问用户。
        例如，选择“页面=加入购物车”“浏览”为起始行为，那么系统会将一段时间内所有浏览过“加入购物车”这个页面的用户都筛选出来，然后再计算他们在这之后是否发生过回访行为。
        ii.回访行为：您希望用户经常地、持续地到你的产品中做什么？在默认条件下，回访行为被设置为“任意行为”，即对任何页面的浏览或操作都被认为是留存。与起始行为一样，你可以设置任意页面的浏览或点击行为作为回访行为。
        例如，选择“按钮=提交订单”“点击”作为回访行为，那么系统会计算：在满足起始行为的用户中，接下来的每一天里有多少人点击了“提交订单”按钮？他们占起始用户的比例有多少？
    d)	过滤条件设置：

        i.时间的过滤：默认选中最近7天进行留存分析。您也可以根据需求调整时间观察，选择过去7天、10天、15天、30天或任意自定义时间。
        例如，如果选择了1月1日至1月9日，那么系统会筛选出1月1日-9日的访问用户，并在这批用户里计算之后每一天又回访产品应用的发生比例。
        ii.应用系统的过滤：默认使用全部应用系统进行分析。
        如果您的产品有IOS，WEB，Android的系统类型，可在下拉选项中选择IOS系统的，那么留存的结果只有IOS系统的用户留存情况。
        iii.添加一个过滤条件：结合您的业务情况，点击可自由添加多个的维度值进行过滤。
        如过滤省份为广东省的用户留存情况。注意，不合理的过滤是会被忽略掉的。

    ![](/assets/user/re-2.png)

3.	分析结果

    a)	留存趋势图

     用户留存率趋势给出特定留存率随时间的变化；比如，新用户次周留存率趋势可以辅助判断获客策略，好的获客策略会带来新用户次周留存率的稳定或提升。

    ![](/assets/user/re-3.png)
    
   
    在趋势图中，我们可以看到最近7天的新用户留存情况的趋势是如何变化的。如图所示留存率的整体情况的一直下降的。说明产品/分析的功能用户黏性是很差的，当然这还需要取决于您的产品对于用户的活跃周期是按日活来判断的。
    * 如果您的产品活跃周期为日，那么建议分析最近7天的留存情况（使用日留存观测）
    * 如果您的产品活跃周期为周，那么建议分析最近30天的留存情况（使用周留存观测）
    * 如果您的产品活跃周期为月，那么建议分析最近180天的留存情况（使用月留存观测）

    【选择留存颗粒度：日留存/周留存/月留存；】

      * 日留存：是指按每天统计完成起始行为目标用户量并按天来观测后续每天的留存情况；
      * 周留存：是指按自然周统计完成起始行为目标用户量并按周来观测后续每周的留存情况；
      * 月留存：是指按自然月统计完成起始行为目标用户量并按周来观测后续每月的留存情况；
      注意：日/周/月颗粒度的切换与起始行为日期范围有关；比如，如果选择了最近7天，应选择日留存来观测留存情况更直观；如果选择了最近90天，应选择周留存来观测留存情况更直观；如果选择了今年/去年，应选择月留存来观测留存情况更直观。
    
  
    b) 留存趋势细节表格

      在留存表格中，我们可以看到最近7天的"汇总行"和"日期行"：

      ![](/assets/user/re-4.png)

      * 汇总行：描述的是最近7天的整体目标用户，在后续的每一天中完成留存行为的留存人数/留存率。
      * 日期行：描述的是每天的目标用户人数，以及他们在后续的每一天中完成留存行为的留存用户量/比例。
      
      ***留存人数与留存率的查看请点击右上角的《数值/百分比》进行切换。***

      **统计方式：**  

      1. 计算每天的留存率

      ![](/assets/user/re-5.png)

      * `4776`：代表在2017年10月24日这天，"目标用户"中完成"起始行为"的用户量

        图中给出的 "日颗粒度"如果是周颗粒度，那么这个单元格中的用户量是当前自然周的获取的用户去重得到的独立用户量。

      * `1293`：代表在2017年10月25日这天，24日的4776人中完成"留存行为"的用户量
      * `27.1%`：代表是25日这天中，24日4776人的留存率
        ```
        留存率的计算方式：

        27.1% = 1293（人）/4776（人）
        ```

      2. 计算汇总的目标用户数  

      **需要特别注意，这个数据不是在选定的时间范围内的实际用户量，因为这个数据没有去重。**

      ![](/assets/user/re-6.png)  

      `21122`：代表2017年10月23日-29日目标用户量的相加总和。  
      ```
      汇总的目标用户数的计算方式：

      21122（人） = 3281（人）+4776（人）+4962（人）+2651（人）+2509（人）+2546（人）+397（人）
      ```

      3. 计算汇总的留存率

      ![](/assets/user/re-7.png)
      * `14.0%`：代表2017年10月23-27日目标用户量的留存率。
      ```
      汇总的留存率的计算方式：

          每个日期行 "X日后" 列的用户量算数相加/ 对应每个日期行 "用户量" 列的用户量算数相加

      例：14.0%=659（人）+885（人）+725（人）+602（人）+79（人）/3281（人）+4776（人）+4962（人）+2651（人）+2509（人）
      ```

4.	对比分析

    > 细分对比不同特性的用户留存，可以帮助您了解某些维度特性或者行为与留存的相关性。你可以选择维度和用户分群细分进行对比分析。

  * 维度对比： 分析符合某个维度特征的新用户的留存，常用于分析渠道质量等。
  * 分群对比： 分析属于某用户分群的新用户的留存，比如来自华北地区的用户、或者加入过收藏的用户等。


5.	保存常用  
  将常用的分析留存的条件保存起来，便于常用条件的快捷分析。点击右上角的“保存为常用留存”然后输入留存的名称即可在下次进来时在常用留存的下拉中调出保存过的留存即可。




***


# 应用场景

## 场景1：新功能验证
1. 对新功能进行埋点，并做页面分类的归类；
 
    ![](/assets/user/re-9.png) 
 
    只需要对新功能-某栏目进行快速可视化埋点，对新功能的所有页面设置一个页面分类。即可马上收集用户数据来观察用户对新功能的使用情况，根据数据进一步优化产品功能。

2. 快速定义需要观察的数据指标；

    自定义衡量新功能是否受欢迎的指标：功能活跃比（使用某个功能的活跃用户占同期活跃用户数的比例）

    ![](/assets/user/re-8.png) 
 

3. 在留存分析中设置功能留存为停留在新功能的首页；

    ![](/assets/user/re-11.png) 

4. 通过结合留存率来看，产品的活跃比较稳定但留存偏低，存在较大的优化空间。

    ![](/assets/user/re-10.png) 

得出结论：用户对新功能的喜欢度不高。可结合其他行为分析的工具分析出主要的影响留存因素。

## 场景2：评估产品改版效果
```
设置：选择整体留存，维度对比设置如下：

维度对比 > 应用版本：
 1 1.0
 2 1.3
```
 ![](/assets/user/re-12.gif) 

通过对比，1.3 版本的用户留存率有明显提升。

## 场景3：评估推广渠道的质量
```
设置：选择推广的功能（如着陆页为首页），维度对比设置如下：

维度对比 > 来源渠道：
 1 百度搜索
 2 谷歌搜索
 3 360搜索
```
 ![](/assets/user/re-12.png) 

通过对比，360搜索的用户留存率最高，较其他渠道来说360搜索引进的用户更优质。


## 场景4：不同运营活动的效果衡量

```
设置：选择留存行为为运营的转化结果（如这次的运营是为了让用户使用优惠券进行购买，那么选择留存行为：成功支付），维度对比设置如下：
C
维度对比 > 事件名称：
 1 马上领券A
 2 马上领券B
 3 马上领券C
```
 ![](/assets/user/re-13.png) 

通过对比，可以看到不同优惠券领取的用户量和转化效果。点击马上领券A的用户转化相比其他的更为明显。

关于用户运营的介绍：
  * [用户分群](user-segmentation.md)
  * [用户行为轨迹](user-segmentation.md#behavior-trace)
  * [路径分析](path-analytics.md)
  * [漏斗分析](funnel-analytics.md)
  * [事件分析](event-analytics.md)